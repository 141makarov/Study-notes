<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <script src="echarts.js"></script>
  <script src="jquery-3.3.1.min.js">
  </script>
  <meta charset="utf-8">
  <title></title>
</head>

<body>
  <h1>echarts</h1>
  <input type='button' id="change" value="更数据">
  <div id='main' style='width:1000px;height :800px'>

  <input type='button' id="change" value="更新数据">
  <div class="pic">
    <script type="text/javascript">
      var mychart = echarts.init(document.getElementById('main'));
      var xAxisData = [];
      var data1 = [];
      var data2 = [];
      for (var i = 0; i < 100; i++) {
        xAxisData.push('类目' + i);
        data1.push((Math.sin(i / 5) * (i / 5 - 10) + i / 6) * 5);
        data2.push((Math.cos(i / 5) * (i / 5 - 10) + i / 6) * 5);
      }

      option = {
        title: {
          text: '柱状图动画延迟'
        },
        legend: {
          data: ['bar', 'bar2'],
          align: 'left'
        },
        toolbox: {
          // y: 'bottom',
          feature: {
            magicType: {
              type: ['stack', 'tiled']
            },
            dataView: {},
            saveAsImage: {
              pixelRatio: 2
            }
          }
        },
        tooltip: {},
        xAxis: {
          data: xAxisData,
          silent: false,
          splitLine: {
            show: false
          }
        },
        yAxis: {},
        series: [{
          name: 'bar',
          type: 'bar',
          data: data1,
          animationDelay: function(idx) {
            return idx * 10;
          }
        }, {
          name: 'bar2',
          type: 'bar',
          data: data2,
          animationDelay: function(idx) {
            return idx * 10 + 100;
          }
        }],
        animationEasing: 'elasticOut',
        animationDelayUpdate: function(idx) {
          return idx * 50;
        }
      };

      mychart.setOption(option);

      $('#change').click(function() {
        var data1 = [];
        var data2 = [];
        for (var i = 0; i < 100; i++) {
          data1.push((Math.sin(i / 5) * (i / 5 - 10) + i / 6) * 10);
          data2.push((Math.cos(i / 5) * (i / 5 - 10) + i / 6) * 10);
        }
        option.series[0].data = data1;
        option.series[1].data = data2;

        mychart.setOption(option);
      });
    </script>
  </div>

  </div>

</body>

</html>
